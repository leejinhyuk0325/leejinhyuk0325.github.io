(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,32873,e=>{"use strict";var t=e.i(43476),r=e.i(71645),s=e.i(18566),l=e.i(39321),a=e.i(78933),i=e.i(40238),o=e.i(3766),n=e.i(52750),d=e.i(22016);function c(){let[e,c]=(0,r.useState)(null),[u,x]=(0,r.useState)(!0),[m,h]=(0,r.useState)([]),[p,g]=(0,r.useState)([]),[b,f]=(0,r.useState)(!1),[y,j]=(0,r.useState)("my"),v=(0,s.useRouter)();(0,r.useEffect)(()=>{(async()=>{try{let{data:{session:e},error:t}=await l.supabase.auth.getSession();if(t){console.error("세션 가져오기 오류:",t),v.push("/login");return}if(!e)return void v.push("/login");c(e.user)}catch(e){console.error("사용자 정보 가져오기 오류:",e),v.push("/login")}finally{x(!1)}})();let{data:{subscription:e}}=l.supabase.auth.onAuthStateChange((e,t)=>{t?c(t.user):v.push("/login")});return()=>{e.unsubscribe()}},[v]),(0,r.useEffect)(()=>{e&&N()},[e,y]);let N=async()=>{if(e){f(!0);try{if("my"===y){let t=await (0,n.getPostsByAuthor)(e.id);h(t)}else{let e=(await (0,n.getAllPosts)()).filter(e=>"popular"===e.category);g(e)}}catch(e){console.error("게시글 로드 오류:",e)}finally{f(!1)}}},w=async t=>{if(!e||!confirm("이 게시글을 연재도전에 연재하시겠습니까? 연재도전에 연재하면 더 많은 독자들이 볼 수 있습니다."))return;let r=await (0,n.publishToPopular)(t,e.id);r.success?(alert("연재도전에 연재되었습니다!"),N()):(alert("연재에 실패했습니다. 다시 시도해주세요."),console.error("연재 오류:",r.error))};if(u)return(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-600",children:"로딩 중..."})]})});if(!e)return null;let k="my"===y?m:p;return(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsx)(a.default,{}),(0,t.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsxs)(d.default,{href:"/mypage",className:"inline-flex items-center text-blue-600 hover:text-blue-700",children:[(0,t.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"마이페이지로 돌아가기"]}),(0,t.jsxs)(d.default,{href:"/mypage/author/write",className:"inline-flex items-center px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition-colors text-sm font-medium",children:[(0,t.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"작품 작성하기"]})]}),(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"작가페이지"}),(0,t.jsx)("p",{className:"text-gray-600",children:"내 작품을 관리하고 연재도전에 연재할 수 있습니다."})]}),(0,t.jsx)("div",{className:"bg-white rounded-lg shadow-md mb-6",children:(0,t.jsx)("div",{className:"border-b border-gray-200",children:(0,t.jsxs)("nav",{className:"flex -mb-px",children:[(0,t.jsxs)("button",{onClick:()=>j("my"),className:`flex-1 py-4 px-6 text-center font-medium text-sm ${"my"===y?"border-b-2 border-purple-500 text-purple-600":"text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["내 작품 (",m.length,")"]}),(0,t.jsxs)("button",{onClick:()=>j("popular"),className:`flex-1 py-4 px-6 text-center font-medium text-sm ${"popular"===y?"border-b-2 border-purple-500 text-purple-600":"text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["연재도전 연재 (",p.length,")"]})]})})}),b?(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-600",children:"로딩 중..."})]}):"my"===y&&0===m.length?(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-12 text-center",children:[(0,t.jsx)("svg",{className:"w-16 h-16 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),(0,t.jsx)("p",{className:"text-gray-600 text-lg mb-4",children:"아직 작성한 작품이 없습니다."}),(0,t.jsx)(d.default,{href:"/mypage/author/write",className:"inline-block bg-purple-600 hover:bg-purple-700 text-white font-semibold py-3 px-6 rounded-lg transition-colors",children:"작품 작성하기 →"})]}):(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:k.map(e=>(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(o.default,{post:e,variant:"default"}),"my"===y&&"popular"!==e.category&&(0,t.jsx)("button",{onClick:()=>w(e.id),className:"absolute top-4 right-4 p-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg shadow-md transition-colors text-xs font-medium",title:"연재도전에 연재하기",children:"연재도전 연재"}),"popular"===y&&(0,t.jsx)("div",{className:"absolute top-4 right-4",children:(0,t.jsx)("span",{className:"px-3 py-1 bg-green-100 text-green-800 rounded-full text-xs font-medium",children:"연재도전"})})]},e.id))})]}),(0,t.jsx)(i.default,{})]})}e.s(["default",()=>c])}]);