(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,52750,e=>{"use strict";var r=e.i(39321);async function t(e){try{let{data:t,error:s}=await r.supabase.from("posts").select("*").eq("serial_id",e).order("created_at",{ascending:!1});if(s)return console.error("글 가져오기 오류:",s),[];return t||[]}catch(e){return console.error("글 가져오기 예외:",e),[]}}async function s(e){try{let{data:t,error:s}=await r.supabase.from("posts").select("*").eq("id",e).single();if(s)return console.error("글 가져오기 오류:",s),null;if(!t)return null;return t}catch(e){return console.error("글 가져오기 예외:",e),null}}function o(e){return["tightend01@naver.com"].includes(e?.toLowerCase())}async function a(e,t,s){try{if(!e||!t)return{success:!1,error:Error("잘못된 요청입니다.")};if(o(s)){let{error:t}=await r.supabase.from("posts").delete().eq("id",e);if(t)return console.error("글 삭제 오류:",t),{success:!1,error:t};return{success:!0}}{let{error:s}=await r.supabase.from("posts").delete().eq("id",e).eq("author_id",t);if(s)return console.error("글 삭제 오류:",s),{success:!1,error:s};return{success:!0}}}catch(e){return console.error("글 삭제 예외:",e),{success:!1,error:e}}}async function n(s,o){try{let{data:{session:a}}=await r.supabase.auth.getSession();if(!a)throw Error("로그인이 필요합니다.");let{data:n,error:c}=await r.supabase.from("posts").insert([{serial_id:s,title:o.title,content:o.content,author_id:a.user.id}]).select().single();if(c)throw console.error("글 생성 오류:",c),c;try{let{getSerialById:o}=await e.A(54788),a=await o(s);if(a&&"popular"===a.category){let e=a.requirement;if(null!=e&&a.shareCount>=e){let e=await t(s);if(e&&e.length>=1){let{error:t}=await r.supabase.from("serials").update({category:"serial"}).eq("id",s);t?console.error(`게시글 ${s} 연재시작코너 이동 실패:`,t):console.log(`게시글 ${s}가 연재시작코너로 이동되었습니다. (글 ${e.length}개 작성됨)`)}}}}catch(e){console.error("연재시작코너 이동 중 오류 (글 작성은 성공):",e)}return n}catch(e){throw console.error("글 생성 예외:",e),e}}e.s(["createPost",()=>n,"deletePost",()=>a,"getPostByPostId",()=>s,"getPostsBySerialId",()=>t,"isAdminEmail",()=>o])},54788,e=>{e.v(e=>Promise.resolve().then(()=>e(44518)))}]);