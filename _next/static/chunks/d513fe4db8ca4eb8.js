(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,59820,e=>{"use strict";var s=e.i(43476),t=e.i(71645),r=e.i(18566),a=e.i(39321);function l(){let[e,l]=(0,t.useState)(""),[i,d]=(0,t.useState)(!1),[n,o]=(0,t.useState)(null),[u,c]=(0,t.useState)(!0),m=(0,r.useRouter)();(0,t.useEffect)(()=>{(async()=>{try{let{data:{session:e}}=await a.supabase.auth.getSession();if(!e)return void m.push("/login");let{data:s,error:t}=await a.supabase.from("users").select("instagram_id").eq("id",e.user.id).single();if(t&&"PGRST116"!==t.code&&console.error("프로필 확인 오류:",t),s&&s.instagram_id)return void m.push("/mypage");c(!1)}catch(e){console.error("사용자 확인 오류:",e),o("사용자 정보를 확인하는 중 오류가 발생했습니다."),c(!1)}})()},[m]);let b=async s=>{s.preventDefault(),d(!0),o(null);try{let{data:{session:s}}=await a.supabase.auth.getSession();if(!s){o("로그인이 필요합니다."),m.push("/login");return}let{error:t}=await a.supabase.from("users").upsert({id:s.user.id,instagram_id:e.trim(),updated_at:new Date().toISOString()});if(t)throw t;m.push("/mypage"),m.refresh()}catch(e){console.error("프로필 저장 오류:",e),o(e.message||"프로필 저장에 실패했습니다. 다시 시도해주세요.")}finally{d(!1)}};return u?(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-gray-600",children:"확인 중..."})]})}):(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 flex items-center justify-center px-4 py-12",children:(0,s.jsx)("div",{className:"w-full max-w-md",children:(0,s.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 md:p-10",children:[(0,s.jsx)("div",{className:"text-center mb-8",children:(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Creative Crowdfunding"})}),(0,s.jsxs)("div",{className:"text-center mb-8",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"추가 정보 입력"}),(0,s.jsx)("p",{className:"text-gray-600 text-sm",children:"서비스를 이용하기 위해 추가 정보를 입력해주세요."})]}),n&&(0,s.jsx)("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:(0,s.jsx)("p",{className:"text-sm text-red-600",children:n})}),(0,s.jsxs)("form",{onSubmit:b,className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"instagramId",className:"block text-sm font-medium text-gray-700 mb-2",children:"인스타그램 아이디"}),(0,s.jsx)("input",{type:"text",id:"instagramId",placeholder:"@username 또는 username",value:e,onChange:e=>l(e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all",required:!0,disabled:i}),(0,s.jsx)("p",{className:"mt-2 text-xs text-gray-500",children:"@ 기호는 입력하지 않아도 됩니다."})]}),(0,s.jsx)("button",{type:"submit",disabled:i,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 disabled:cursor-not-allowed text-white font-semibold py-3 px-4 rounded-lg transition-colors shadow-md hover:shadow-lg",children:i?"저장 중...":"저장하고 계속하기"})]})]})})})}e.s(["default",()=>l])}]);