(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,31619,e=>{"use strict";var t=e.i(43476),s=e.i(71645),r=e.i(18566),a=e.i(39321),l=e.i(78933),i=e.i(40238),n=e.i(3766),d=e.i(52750),o=e.i(22016);function c(){let[e,c]=(0,s.useState)(null),[u,h]=(0,s.useState)(!0),[x,m]=(0,s.useState)("shared"),[b,g]=(0,s.useState)([]),[f,p]=(0,s.useState)([]),[v,j]=(0,s.useState)(!1),y=(0,r.useRouter)();(0,s.useEffect)(()=>{(async()=>{try{let{data:{session:e},error:t}=await a.supabase.auth.getSession();if(t){console.error("세션 가져오기 오류:",t),y.push("/login");return}if(!e)return void y.push("/login");c(e.user)}catch(e){console.error("사용자 정보 가져오기 오류:",e),y.push("/login")}finally{h(!1)}})();let{data:{subscription:e}}=a.supabase.auth.onAuthStateChange((e,t)=>{t?c(t.user):y.push("/login")});return()=>{e.unsubscribe()}},[y]),(0,s.useEffect)(()=>{e&&N()},[e,x]);let N=async()=>{if(e){j(!0);try{if("shared"===x){let t=await (0,d.getUserSharedPosts)(e.id);g(t)}else{let t=await (0,d.getUserFavorites)(e.id);p(t)}}catch(e){console.error("게시글 로드 오류:",e)}finally{j(!1)}}},w=async t=>{!e||(await (0,d.removeFavorite)(t,e.id)).success&&p(e=>e.filter(e=>e.id!==t))};if(u)return(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-600",children:"로딩 중..."})]})});if(!e)return null;let k="shared"===x?b:f;return(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsx)(l.default,{}),(0,t.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsxs)(o.default,{href:"/mypage",className:"inline-flex items-center text-blue-600 hover:text-blue-700 mb-4",children:[(0,t.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"마이페이지로 돌아가기"]}),(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"독자페이지"}),(0,t.jsx)("p",{className:"text-gray-600",children:"공유한 게시글과 관심있는 글을 확인하세요."})]}),(0,t.jsx)("div",{className:"bg-white rounded-lg shadow-md mb-6",children:(0,t.jsx)("div",{className:"border-b border-gray-200",children:(0,t.jsxs)("nav",{className:"flex -mb-px",children:[(0,t.jsxs)("button",{onClick:()=>m("shared"),className:`flex-1 py-4 px-6 text-center font-medium text-sm ${"shared"===x?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["공유한 게시글 (",b.length,")"]}),(0,t.jsxs)("button",{onClick:()=>m("favorites"),className:`flex-1 py-4 px-6 text-center font-medium text-sm ${"favorites"===x?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["관심있는 글 (",f.length,")"]})]})})}),v?(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-600",children:"로딩 중..."})]}):0===k.length?(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-12 text-center",children:[(0,t.jsx)("svg",{className:"w-16 h-16 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),(0,t.jsx)("p",{className:"text-gray-600 text-lg",children:"shared"===x?"아직 공유한 게시글이 없습니다.":"아직 관심있는 글이 없습니다."}),(0,t.jsx)(o.default,{href:"/",className:"mt-4 inline-block text-blue-600 hover:text-blue-700 font-medium",children:"게시글 둘러보기 →"})]}):(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:k.map(e=>(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(n.default,{post:e,variant:"default"}),"favorites"===x&&(0,t.jsx)("button",{onClick:()=>w(e.id),className:"absolute top-4 right-4 p-2 bg-white rounded-full shadow-md hover:bg-red-50 transition-colors",title:"관심있는 글에서 제거",children:(0,t.jsx)("svg",{className:"w-5 h-5 text-red-600",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z",clipRule:"evenodd"})})})]},e.id))})]}),(0,t.jsx)(i.default,{})]})}e.s(["default",()=>c])}]);